const casesSlider=document.querySelector(".cases-slider"),blogSlider=document.querySelector(".blogs-slider"),testimonialsSlider=document.querySelector(".testimonials-swiper"),sliderGallery=document.querySelector(".gallery-slider"),tabsTable=document.querySelectorAll(".table-th-tab"),homePageWrapper=document.querySelector(".home-page__wrapper"),caseStudyPageWrapper=document.querySelector(".case-study-page__wrapper"),blogPageWrapper=document.querySelector(".blog-page__wrapper"),initSwiperSlider=(e,t)=>new Swiper(e,{...t,loop:!1,init:!0,pagination:{clickable:!0,el:e.querySelector(".swiper-pagination"),clickable:!0}});let newTestimonialsSwiper;function mobileSliderTestimonials(){const e=document.documentElement.clientWidth<=425;e&&testimonialsSlider.dataset.mobile==="false"&&(newTestimonialsSwiper=initSwiperSlider(testimonialsSlider,{slidesPerView:1,spaceBetween:0}),testimonialsSlider.dataset.mobile="true"),!e&&testimonialsSlider.dataset.mobile==="true"&&(newTestimonialsSwiper.destroy(),testimonialsSlider.dataset.mobile="false")}const animateLines=()=>{const e=document.querySelectorAll(".gray-line"),t=document.querySelectorAll(".vertical-gray-line "),u=document.documentElement.clientWidth,c=document.querySelectorAll(".testimonials .vertical-gray-line"),r=document.querySelectorAll(".explore .vertical-gray-line"),i=parseFloat(getComputedStyle(document.documentElement).fontSize),a=1e3,n=e=>{e.forEach(e=>{h(e)})},o=e=>{e.classList.contains("testimonials__gray-line")&&n(c),e.classList.contains("explore__gray-line")&&n(r)},l=e=>{const t=getComputedStyle(e);return t.width},d=e=>{const t=getComputedStyle(e);return t.height},s=e=>{const r=l(e),n=parseFloat(r)/i,c=n/a*10;let t=0;e.style.opacity=1;const s=()=>{if(t>=n){e.style.maxWidth=100+"%",o(e);return}t+=c,e.style.maxWidth=t+"rem",requestAnimationFrame(s)};s()},h=e=>{const s=d(e),n=parseFloat(s)/i,c=n/a*10;let t=0;e.style.opacity=1;const r=()=>{if(t>=n){e.style.maxHeight=s,o(e);return}t+=c,e.style.maxHeight=t+"rem",t<n&&requestAnimationFrame(r)};r()};function m(e){let t=e.getBoundingClientRect();return t.top>=0&&t.top<window.innerHeight&&!e.classList.contains("is-visible")}const f=document.querySelectorAll(".explore, .services, .testimonials, .cases");function p(){f.forEach(function(e){if(m(e)){e.classList.add("is-visible");const t=document.querySelectorAll(`.${e.className.split(" ")[0]} .gray-line`);t.forEach(e=>{s(e)})}})}const g=document.querySelector(".lazy-bison .gray-line");s(g),u>425&&document.addEventListener("scroll",p);function v(){const n=document.documentElement.clientWidth;n<=768&&(e.forEach(e=>{e.style=null}),t.forEach(e=>e.style=null)),n<=425?(e.forEach(e=>{e.style.opacity=1}),t.forEach(e=>e.style.opacity=0),e.forEach(e=>e.style.opacity=0)):(e.forEach(e=>e.style.opacity=1),t.forEach(e=>e.style.opacity=1))}window.addEventListener("resize",v)},animateTestimonials=()=>{const e=document.querySelector(".testimonials__list"),t=document.documentElement.clientWidth;function n(e){for(let t=e.length-1;t>=0;t--){const n=Math.floor(Math.random()*(t+1));[e[t],e[n]]=[e[n],e[t]]}return e}const s=Array.from(e.children);t>425&&setInterval(()=>{const t=n(s);e.classList.add("fade-out"),setTimeout(()=>{for(;e.firstChild;)e.removeChild(e.firstChild);t.forEach(t=>{e.appendChild(t)}),e.classList.remove("fade-out")},250)},3e3)},dropdown=()=>{const e=document.querySelectorAll(".services-info__type-button"),n=document.querySelectorAll(".descriptions__content"),o=document.querySelectorAll(".services-info__description-text"),r=document.querySelector(".services-info__title"),i=document.documentElement.clientWidth,s=()=>{e.forEach((e,t)=>{const n=o[t],s=n.cloneNode(!0);e.insertAdjacentElement("afterend",s)})},a=e=>{const t=Array.from(document.querySelectorAll(".services-info__description-text")).filter(e=>window.getComputedStyle(e).getPropertyValue("display")!=="none");t.forEach(e=>{e.classList.remove("slide-in-height")}),t[e].classList.add("slide-in-height")};e.forEach(function(t,s){t.addEventListener("click",t=>{a(s),e.forEach(e=>{e.classList.remove("active")}),n.forEach(function(e){e.classList.remove("show")}),t.currentTarget.classList.add("active"),n[s].classList.add("show")})});let t=!1;i<=425&&(s(),t=!0),window.addEventListener("resize",e=>{const n=document.documentElement.clientWidth;n<=425&&!t&&(s(),t=!0)})},popup=()=>{const n=document.querySelectorAll(".get-consultation-btn"),s=document.querySelectorAll(".close-popup-button"),e=document.querySelector(".popup"),o=document.querySelector(".overlay"),i=document.querySelector("#get-consultation .btn-cancel"),a=e=>{const t=document.getElementById(e);t.classList.remove("close"),document.body.style.overflow="hidden",t.classList.add("open")},t=()=>{e.classList.contains("open")&&(document.body.style.overflow="auto",e.classList.add("close"),setTimeout(()=>{e.className=e.className.split(" ").splice(0,2).join(" ")},300))};n.forEach(e=>{e.addEventListener("click",()=>{a("get-consultation")})}),s.forEach(e=>{e.addEventListener("click",t)}),o.addEventListener("click",t),i.addEventListener("click",t)},getConsultationForm=()=>{const e=document.querySelector(".form"),s=e.querySelector(".textarea"),f=e.querySelector(".error-icon"),c=e.querySelector(".error-text"),o=e.querySelector(".input-email"),a=e.querySelector(".checkbox-custom"),n=e.querySelector(".checkbox"),r=document.querySelector(".btn-submit"),i=document.querySelector(".popup");function l(){const t=e.querySelector(".character-count");t.textContent=`${s.value.length}/360`}function d(e){const t=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return t.test(e)}function u(e){const n=new FormData(e),t={};for(let[e,s]of n)t[e]=s;return t}function h(){o.removeEventListener("input",t),n.removeEventListener("input",t)}function m(){o.addEventListener("input",t),n.addEventListener("input",t)}function t(){const s=u(e),{email:o,agree:i}=s,t=d(o),n=i;return f.classList.toggle("error",!t),c.classList.toggle("error",!t),a.classList.toggle("error",!n),e.classList.toggle("invalid",!t||!n),r.disabled=!t||!n,!!(t&&n)}function p(n){n.preventDefault();const s=new FormData(n.target),o=t();if(o){fetch(n.target.action,{method:e.method,body:s,headers:{Accept:"application/json"}}).then(t=>{t.ok?(e.reset(),i.classList.add("submit-success"),h()):t.json().then(e=>{if(Object.hasOwn(e,"errors")){const t=e.errors.map(e=>e.message).join(", ");console.log(t)}else console.log("Oops! There was a problem submitting your form")})}).catch(e=>{console.log("Form error:",e),console.log("Oops! There was a problem submitting your form")});return}m()}e.addEventListener("submit",p),s.addEventListener("input",l)},burgerButton=document.querySelector(".burger-menu-button"),menu=document.querySelector(".header__main-nav"),body=document.body,navMenuLinks=document.querySelectorAll(".header__main-nav-link");function closeMenu(){menu.classList.contains("menu-open")&&(menu.classList.remove("menu-open"),burgerButton.classList.remove("menu-open"),body.classList.remove("hidden"))}function toggleMenu(){burgerButton.classList.toggle("menu-open"),body.classList.toggle("hidden"),menu.classList.toggle("menu-open")}if(navMenuLinks.forEach(e=>{e.addEventListener("click",()=>{menu.classList.contains("menu-open")&&closeMenu()})}),burgerButton.addEventListener("click",toggleMenu),homePageWrapper&&(animateLines(),animateTestimonials(),dropdown()),popup(),getConsultationForm(),blogSlider&&testimonialsSlider&&casesSlider&&(initSwiperSlider(casesSlider,{slidesPerView:"auto",spaceBetween:28,breakpoints:{0:{slidesPerView:"auto",spaceBetween:8},768:{slidesPerView:"auto",spaceBetween:10},1440:{slidesPerView:2,spaceBetween:28}}}),initSwiperSlider(blogSlider,{slidesPerView:"auto",spaceBetween:8,breakpoints:{0:{slidesPerView:"auto",spaceBetween:8},768:{slidesPerView:2,spaceBetween:16},1440:{slidesPerView:3,spaceBetween:28}}}),mobileSliderTestimonials(),window.addEventListener("resize",mobileSliderTestimonials)),sliderGallery&&initSwiperSlider(sliderGallery,{slidesPerView:1,spaceBetween:10,navigation:{nextEl:document.querySelector(".swiper-btn-next"),prevEl:document.querySelector(".swiper-btn-prev")}}),tabsTable&&tabsTable.length>=3&&tabsTable.forEach((e,t)=>{if(t===0)return;e.addEventListener("click",e=>{tabsTable.forEach(e=>e.classList.remove("table-th-tab-active")),e.target.classList.toggle("table-th-tab-active")})}),blogPageWrapper){const e=document.querySelectorAll("div.highlight");e.forEach(e=>{e.classList.add("code-wrapper"),e.insertAdjacentHTML("afterbegin",`
        <button class="button copy-button">
            <i class="icon icon-copy"></i>
            <span>Copy</span>
            <span class="tooltiptext">
             <i class="icon icon-tick-success"></i>
            Copied!</span>
        </button>
    
    `)});const t=document.querySelectorAll(".copy-button");t.forEach(e=>{e.addEventListener("click",t=>{const{currentTarget:n}=t,s=e.closest(".code-wrapper").querySelector("code").textContent;try{navigator.clipboard.writeText(s),n.classList.add("copied"),setTimeout(()=>{n.classList.remove("copied")},1e3)}catch(e){console.error("Ошибка копирования: ",e)}})})}